<!DOCTYPE html>
<html>
<head>
    <title>Test de Registro de Visitas Local</title>
</head>
<body>
    <h1>ğŸ§ª Test de Registro de Visitas - WordPress Local</h1>
    
    <h2>Instrucciones:</h2>
    <ol>
        <li><strong>AsegÃºrate</strong> de que WordPress estÃ© ejecutÃ¡ndose localmente</li>
        <li><strong>Visita</strong> cualquier pÃ¡gina de tu sitio (no el admin)</li>
        <li><strong>Ve al panel:</strong> <code>Ajustes > Visitor Country Map</code></li>
        <li><strong>Verifica</strong> si hay nuevas estadÃ­sticas</li>
    </ol>
    
    <h2>ğŸ’¡ Â¿Por quÃ© deberÃ­a funcionar?</h2>
    <ul>
        <li>âœ… Tu IP local se detecta automÃ¡ticamente</li>
        <li>âœ… Se reemplaza con una IP de prueba aleatoria</li>
        <li>âœ… Se consulta la geolocalizaciÃ³n de esa IP</li>
        <li>âœ… Se registra el paÃ­s en la base de datos</li>
    </ul>
    
    <h2>ğŸ” Debug: InformaciÃ³n de tu conexiÃ³n</h2>
    <script>
        // Mostrar informaciÃ³n del navegador
        document.write('<p><strong>User Agent:</strong> ' + navigator.userAgent + '</p>');
        document.write('<p><strong>Idioma:</strong> ' + navigator.language + '</p>');
        
        // Intentar obtener IP pÃºblica (para referencia)
        fetch('https://api.ipify.org?format=json')
            .then(response => response.json())
            .then(data => {
                document.write('<p><strong>Tu IP pÃºblica:</strong> ' + data.ip + '</p>');
                document.write('<p><em>Nota: En localhost, WordPress verÃ¡ tu IP local, no esta.</em></p>');
            })
            .catch(() => {
                document.write('<p><strong>IP pÃºblica:</strong> No disponible (normal en localhost)</p>');
            });
    </script>
    
    <h2>ğŸš¨ Si NO se registran visitas:</h2>
    <ol>
        <li><strong>Verifica el log:</strong> Busca en <code>wp-content/debug.log</code></li>
        <li><strong>Activa debug:</strong> En <code>wp-config.php</code> aÃ±ade:
            <pre>define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);</pre>
        </li>
        <li><strong>Verifica hooks:</strong> AsegÃºrate de que el hook <code>wp</code> se ejecute</li>
        <li><strong>Prueba directa:</strong> Usa el botÃ³n "Simular Visita" en el admin</li>
    </ol>
    
    <h2>ğŸ“Š SimulaciÃ³n Manual</h2>
    <p>Si quieres forzar un registro inmediato, ve a:</p>
    <p><strong>Admin WordPress > Ajustes > Visitor Country Map > ğŸŒ Simular Visita Aleatoria</strong></p>
    
    <h2>ğŸ¯ Resultado Esperado</h2>
    <p>DespuÃ©s de navegar por tu sitio local, deberÃ­as ver en el admin:</p>
    <ul>
        <li>ğŸ“Š <strong>Total de paÃ­ses registrados:</strong> 1 o mÃ¡s</li>
        <li>ğŸ—ƒï¸ <strong>Tabla de BD:</strong> âœ… Existe</li>
        <li>ğŸ“ˆ <strong>EstadÃ­sticas:</strong> Lista con paÃ­ses y visitas</li>
    </ul>
</body>
</html>
